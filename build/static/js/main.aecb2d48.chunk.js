(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),s=t(23),c=t.n(s),i=t(9),o=t(10),l=t(12),u=t(11),m=t(13),E=t(54),h=t.n(E),p=t(5),f=t(2),g=function(e){return function(n,t){n({type:f.CHAT_WITH,val:e})}},d=function(e,n){return function(t){t({type:f.SEND_MESSAGE,val:{dest:e,cont:n}})}},S=t(112),v=t(115),b=function(e){function n(){var e,t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=Object(l.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(r)))).handleChange=function(e){t.props.setNickname(e.target.value)},t.handleClick=function(e){var n=t.props,a=n.verifiyUser,r=n.nickname,s=n.setError,c=n.setNickname,i=r.replace(/\s/g,"");i.length<=0?(s("nickname is required"),t.input.focus()):i.length>=3?(c(i),a(t.props.history)):(s("nickname must be min 3 chars"),t.input.focus())},t.handleKeyPress=function(e){13===e.charCode&&(e.preventDefault(),t.handleClick(e))},t}return Object(m.a)(n,e),Object(o.a)(n,[{key:"render",value:function(){var e=this,n=this.props.error;return r.a.createElement("article",{className:"login-container"},r.a.createElement("section",{className:"login-content"},r.a.createElement("h1",{className:"title"},"got a nickname ?"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",onChange:this.handleChange,onKeyPress:this.handleKeyPress,placeholder:"Enter nickname...",maxLength:"10",ref:function(n){return e.input=n}}),r.a.createElement("p",null,n)),r.a.createElement("button",{onClick:this.handleClick,className:"btn btn-primary"},"Log in")))}}]),n}(a.Component),k=Object(p.b)(function(e){return{nickname:e.nickname,error:e.error}},function(e){return{setNickname:function(n){var t;e((t=n,function(e){e({type:f.SET_NICKNAME,val:t})}))},verifiyUser:function(n){var t;e((t=n,function(e,n){var a=n(),r=a.nickname,s=a.socket;s.emit(f.VERIFIY_USER,r,function(n){n.isUser?e({type:f.SET_ERROR,val:"nickname not available"}):(s.emit(f.CREATE_USER,n.user),e({type:f.CREATE_USER,val:n.user}),t.push("/".concat(n.user.nickname)))})}))},setError:function(n){var t;e((t=n,function(e){e({type:f.SET_ERROR,val:t})}))}}})(b),N=(t(99),t(3)),O=function(e){function n(){return Object(i.a)(this,n),Object(l.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(o.a)(n,[{key:"render",value:function(){var e=this.props.chatWith;return r.a.createElement("nav",{className:"page-navbar"},r.a.createElement("button",{onClick:function(e){N(".main-menu").toggleClass("active")},className:"menu-opener"},r.a.createElement("i",{className:"material-icons"},"menu")),r.a.createElement("h1",{className:"page-title"},e.nickname?e.nickname:"Chatter"))}}]),n}(a.Component),C=Object(p.b)(function(e){return{chatWith:e.chatWith}})(O),T=t(56),_=t.n(T),y=t(57),j=t.n(y),R=t(14),I=t(24),A=t.n(I),U=function(e){function n(){var e,t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=Object(l.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(r)))).handleChange=function(e){t.props.setMessage(e.target.value),t.props.socket.emit(f.TYPING,t.props.user.nickname)},t.containsObject=function(e,n){for(var t=0;t<n.length;t++)if(n[t]===e)return!0;return!1},t.handleClick=function(e){var n,a=t.props,r=a.user,s=a.socket,c=a.sendMessage,i=a.message,o=a.chatWith,l=a.setMessage,u=a.onlineUsers,m=a.setChatWith,E=a.sound,h=i.trim(),p={sender:r.nickname,date:j()().format("D/MMM - hh:mm a"),content:h};""!==h?(o.socketID?t.containsObject(o,u)?(n=o.nickname,s.emit(f.SEND_PMESSAGE,{reciver:o.socketID,content:p}),c(n,p)):(t.deletedUser={nickname:o.nickname,condition:!0},t.messagearea.disabled=!0,setTimeout(function(e){t.deletedUser.condition=!1,t.messagearea.disabled=!1,m({})},3e3)):(n="global",s.emit(f.SEND_MESSAGE,p),c(n,p)),l(""),t.messagearea.focus(),!0===E&&new Audio(A.a).play(),N(".message-area").animate({scrollTop:N(".message-area")[0].scrollHeight},500),N("textarea").height("32px")):(l(""),t.messagearea.focus())},t.handleKeyPress=function(e){13===e.charCode&&(e.preventDefault(),t.handleClick(e))},t.deletedUser={nickname:"",condition:!1},t}return Object(m.a)(n,e),Object(o.a)(n,[{key:"componentDidMount",value:function(){_()(this.messagearea)}},{key:"render",value:function(){var e=this,n=this.props,t=n.messages,a=n.user,s=n.typing,c=n.chatWith,i=n.message,o=c.nickname?t[c.nickname]:t.global;return r.a.createElement("article",{className:"message-container"},r.a.createElement(R.TransitionGroup,{className:"message-area"},o?o.map(function(e,n){return r.a.createElement(R.CSSTransition,{timeout:500,key:n,classNames:"msg"},r.a.createElement("div",{key:n,className:"message ".concat(e.sender===a.nickname?"right":"")},r.a.createElement("h2",{className:"message-sender"},e.sender),r.a.createElement("p",{className:"message-content",dir:"auto"},e.content),r.a.createElement("span",{className:"message-time"},e.date)))}):null,!0===this.deletedUser.condition?r.a.createElement("div",{className:"deleted-user"},this.deletedUser.nickname," is no longer available"):null),r.a.createElement("section",{className:"person-typing"},c.nickname?s.split(" ")[0]===c.nickname?s:null:s),r.a.createElement("section",{className:"message-typing"},r.a.createElement("textarea",{placeholder:"Enter message...",onChange:this.handleChange,onKeyPress:this.handleKeyPress,ref:function(n){return e.messagearea=n},rows:"1",dir:"auto",value:i}),r.a.createElement("button",{className:"btn btn-primary",onClick:this.handleClick},r.a.createElement("i",{className:"material-icons"},"send"))))}}]),n}(a.Component),M=Object(p.b)(function(e){return{messages:e.messages,user:e.user,message:e.message,socket:e.socket,typing:e.typing,chatWith:e.chatWith,onlineUsers:e.onlineUsers,sound:e.sound}},function(e){return{sendMessage:function(n,t){e(d(n,t))},setMessage:function(n){e(function(e){return function(n){n({type:f.SET_MESSAGE,val:e})}}(n))},setChatWith:function(n){e(g(n))}}})(U),w=Object(p.b)(null,function(e){return{setChatWith:function(n){e(g(n))}}})(function(e){var n=e.onlineUsers,t=e.user,a=e.setChatWith;return r.a.createElement(R.TransitionGroup,{className:"friend-list"},n.map(function(e,n){return t.nickname!==e.nickname?r.a.createElement(R.CSSTransition,{key:n,timeout:1e3,classNames:"fade"},r.a.createElement("div",{key:n,className:"friend",onClick:function(n){return function(e){a(e),N(".main-menu").toggleClass("active")}(e)}},r.a.createElement("div",null,e.userLetter),r.a.createElement("div",null,e.nickname))):""}))}),G=t(114),P=t(15),D=function(e){function n(){var e,t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=Object(l.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(r)))).handleShowOnline=function(e){t.arrow="arrow_right"===t.arrow?"arrow_drop_down":"arrow_right",N(".online").children(".material-icons").text(t.arrow),N(".friend-list").slideToggle()},t.handleLogout=function(e){t.props.socket.disconnect(),window.location.href="/"},t.handleGlobalClick=function(e){t.props.setChatWith({}),N(".main-menu").toggleClass("active")},t}return Object(m.a)(n,e),Object(o.a)(n,[{key:"componentDidMount",value:function(){this.arrow="arrow_right",N(".friend-list").slideToggle()}},{key:"render",value:function(){var e=this.props,n=e.user,t=e.onlineUsers;return r.a.createElement("article",{className:"main-menu"},r.a.createElement("nav",{className:"sidemenu-nav"},r.a.createElement("button",{onClick:this.handleLogout,className:"logof"},r.a.createElement("i",{className:"material-icons"},"eject")),r.a.createElement("button",{onClick:function(e){N(".main-menu").toggleClass("active")},className:"menu-opener"},r.a.createElement("i",{className:"material-icons"},"menu"))),r.a.createElement("section",{className:"profile"},r.a.createElement("span",null,n.userLetter),r.a.createElement("h2",null,n.nickname)),r.a.createElement("section",{className:"chat-types"},r.a.createElement("button",{className:"type",onClick:this.handleGlobalClick},"global ",r.a.createElement("i",{className:"material-icons"},"arrow_right")),r.a.createElement("button",{className:"type online",onClick:this.handleShowOnline},"online ",r.a.createElement("i",{className:"material-icons"},"arrow_right")),r.a.createElement(w,{onlineUsers:t,user:n})))}}]),n}(a.Component),W=Object(P.c)(G.a,Object(p.b)(function(e){return{user:e.user,onlineUsers:e.onlineUsers,socket:e.socket}},function(e){return{setChatWith:function(n){e(g(n))}}}))(D),V=function(e){function n(e){var t;return Object(i.a)(this,n),void 0===(t=Object(l.a)(this,Object(u.a)(n).call(this,e))).props.user.nickname&&t.props.history.push("/"),t}return Object(m.a)(n,e),Object(o.a)(n,[{key:"componentWillUnmount",value:function(){clearInterval(this.inter)}},{key:"render",value:function(){var e=this.props.user.nickname?"Chatter | ".concat(this.props.user.nickname):"Chatter";return document.title=e,r.a.createElement(a.Fragment,null,r.a.createElement("article",{className:"main-container"},r.a.createElement(W,null),r.a.createElement("section",{className:"main-content"},r.a.createElement(C,null),r.a.createElement(M,null))))}}]),n}(a.Component),K=Object(p.b)(function(e){return{user:e.user,socket:e.socket}})(V),L=function(e){function n(){var e,t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=Object(l.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(r)))).recivingMsg=function(e){var n=t.props,a=n.sound,r=n.vibration,s=n.user;N(".message-area").animate({scrollTop:N(".message-area")[0]?N(".message-area")[0].scrollHeight:0},500),!0===a&&s.nickname&&new Audio(A.a).play(),!0===r&&s.nickname&&navigator.vibrate(200)},t}return Object(m.a)(n,e),Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,n=this.props,t=n.socketURL,a=n.setSocket,r=n.sendMessage,s=n.setTyping,c=n.setUsers,i=h()(t);a(i),i.on("connect",function(n){i.on(f.RECIVE_MESSAGE,function(n){r("global",n),e.recivingMsg()}),i.on(f.RECIVE_PMESSAGE,function(n){r(n.dest,n.cont),e.recivingMsg()}),i.on(f.RECIVE_TYPING,function(e){s(e+" is typing"),setTimeout(function(e){s("")},2e3)}),i.on(f.RECIVE_ONLINE,function(e){console.log(e.length),c(e)})})}},{key:"render",value:function(){return r.a.createElement(S.a,{render:function(e){var n=e.location;return r.a.createElement(R.TransitionGroup,null,r.a.createElement(R.CSSTransition,{key:n.key,timeout:1e3,classNames:"fade"},r.a.createElement(v.a,{location:n},r.a.createElement(S.a,{path:"/",exact:!0,component:k}),r.a.createElement(S.a,{path:"/:nickname",component:K}))))}})}}]),n}(a.Component),Y=Object(p.b)(function(e,n){return{socketURL:e.socketURL,sound:e.sound,vibration:e.vibration,user:e.user}},function(e){return{setSocket:function(n){e(function(e){return function(n){n({type:f.SET_SOCKET,val:e})}}(n))},sendMessage:function(n,t){e(d(n,t))},setTyping:function(n){e(function(e){return function(n){n({type:f.SET_TYPING,val:e})}}(n))},setUsers:function(n){e(function(e){return function(n,t){n({type:f.UPDATE_USERS,val:e})}}(n))}}})(L);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var x=t(113),H=t(60),B=t(27),F=t(61),J=t(7),q={socketURL:"/",socket:null,nickname:"",message:"",typing:"",error:"",vibration:!0,sound:!0,user:{},chatWith:{},messages:{global:[]},onlineUsers:[]},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case f.SET_SOCKET:return Object(J.a)({},e,{socket:n.val});case f.SET_VIBRATION:return Object(J.a)({},e,{vibration:n.val});case f.SET_SOUND:return Object(J.a)({},e,{sound:n.val});case f.SET_NICKNAME:return Object(J.a)({},e,{nickname:n.val});case f.SET_TYPING:return Object(J.a)({},e,{typing:n.val});case f.CREATE_USER:return Object(J.a)({},e,{user:n.val,error:""});case f.SET_ERROR:return Object(J.a)({},e,{error:n.val});case f.SET_MESSAGE:return Object(J.a)({},e,{message:n.val});case f.SEND_MESSAGE:return Object(J.a)({},e,{messages:Object(J.a)({},e.messages,Object(B.a)({},n.val.dest,e.messages[n.val.dest]?[].concat(Object(F.a)(e.messages[n.val.dest]),[n.val.cont]):[n.val.cont]))});case f.UPDATE_USERS:return Object(J.a)({},e,{onlineUsers:n.val});case f.CHAT_WITH:return Object(J.a)({},e,{chatWith:n.val});default:return Object(J.a)({},e)}},z=Object(P.d)($,Object(P.a)(H.a));c.a.render(r.a.createElement(p.a,{store:z},r.a.createElement(x.a,null,r.a.createElement(R.CSSTransition,{in:!0,appear:!0,classNames:"slideIn",timeout:1e3},r.a.createElement(S.a,{path:"/",component:Y})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},2:function(e,n){e.exports={SET_SOCKET:"SET_SOCKET",SET_NICKNAME:"SET_NICKNAME",VERIFIY_USER:"VERIFIY_USER",SET_ERROR:"SET_ERROR",CREATE_USER:"CREATE_USER",TYPING:"TYPING",RECIVE_TYPING:"RECIVE_TYPING",SET_TYPING:"SET_TYPING",SET_MESSAGE:"SET_MESSAGE",SEND_MESSAGE:"SEND_MESSAGE",RECIVE_MESSAGE:"RECIVE_MESSAGE",SEND_PMESSAGE:"SEND_PMESSAGE",RECIVE_PMESSAGE:"RECIVE_PMESSAGE",RECIVE_ONLINE:"RECIVE_ONLINE",UPDATE_USERS:"UPDATE_USERS",CHAT_WITH:"CHAT_WITH",SET_VIBRATION:"SET_VIBRATION",SET_SOUND:"SET_SOUND"}},24:function(e,n,t){e.exports=t.p+"static/media/sound.07388188.ogg"},62:function(e,n,t){e.exports=t(111)},92:function(e,n){},99:function(e,n,t){}},[[62,2,1]]]);
//# sourceMappingURL=main.aecb2d48.chunk.js.map