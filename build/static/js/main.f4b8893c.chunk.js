(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(23),s=t.n(c),i=t(8),o=t(9),l=t(11),u=t(10),m=t(12),E=t(53),h=t.n(E),p=t(5),f=t(2),g=function(e){return function(n,t){n({type:f.CHAT_WITH,val:e})}},d=function(e,n){return function(t){t({type:f.SEND_MESSAGE,val:{dest:e,cont:n}})}},S=t(111),k=t(114),v=function(e){function n(){var e,t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=Object(l.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(r)))).handleChange=function(e){t.props.setNickname(e.target.value)},t.handleClick=function(e){var n=t.props,a=n.verifiyUser,r=n.nickname,c=n.setError,s=n.setNickname,i=r.replace(/\s/g,"");i.length<=0?(c("nickname is required"),t.input.focus()):i.length>=3?(s(i),a(t.props.history)):(c("nickname must be min 3 chars"),t.input.focus())},t.handleKeyPress=function(e){13===e.charCode&&(e.preventDefault(),t.handleClick(e))},t}return Object(m.a)(n,e),Object(o.a)(n,[{key:"render",value:function(){var e=this,n=this.props.error;return r.a.createElement("article",{className:"login-container"},r.a.createElement("section",{className:"login-content"},r.a.createElement("h1",{className:"title"},"got a nickname ?"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",onChange:this.handleChange,onKeyPress:this.handleKeyPress,placeholder:"Enter nickname...",maxLength:"10",ref:function(n){return e.input=n}}),r.a.createElement("p",null,n)),r.a.createElement("button",{onClick:this.handleClick,className:"btn btn-primary"},"Log in")))}}]),n}(a.Component),b=Object(p.b)(function(e){return{nickname:e.nickname,error:e.error}},function(e){return{setNickname:function(n){var t;e((t=n,function(e){e({type:f.SET_NICKNAME,val:t})}))},verifiyUser:function(n){var t;e((t=n,function(e,n){var a=n(),r=a.nickname,c=a.socket;c.emit(f.VERIFIY_USER,r,function(n){n.isUser?e({type:f.SET_ERROR,val:"nickname not available"}):(c.emit(f.CREATE_USER,n.user),e({type:f.CREATE_USER,val:n.user}),t.push("/".concat(n.user.nickname)))})}))},setError:function(n){var t;e((t=n,function(e){e({type:f.SET_ERROR,val:t})}))}}})(v),C=(t(98),t(3)),N=function(e){function n(){return Object(i.a)(this,n),Object(l.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(o.a)(n,[{key:"render",value:function(){var e=this.props.chatWith;return r.a.createElement("nav",{className:"page-navbar"},r.a.createElement("button",{onClick:function(e){C(".main-menu").toggleClass("active")},className:"menu-opener"},r.a.createElement("i",{className:"material-icons"},"menu")),r.a.createElement("h1",{className:"page-title"},e.nickname?e.nickname:"Chatter"))}}]),n}(a.Component),O=Object(p.b)(function(e){return{chatWith:e.chatWith}})(N),T=t(55),_=t.n(T),y=t(56),j=t.n(y),R=t(14),I=function(e){function n(){var e,t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=Object(l.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(r)))).handleChange=function(e){t.props.setMessage(e.target.value),t.props.socket.emit(f.TYPING,t.props.user.nickname)},t.containsObject=function(e,n){for(var t=0;t<n.length;t++)if(n[t]===e)return!0;return!1},t.handleClick=function(e){var n,a=t.props,r=a.user,c=a.socket,s=a.sendMessage,i=a.message,o=a.chatWith,l=a.setMessage,u=a.onlineUsers,m=a.setChatWith,E=i.trim(),h={sender:r.nickname,date:j()().format("D/MMM - hh:mm a"),content:E};""!==E?(o.socketID?t.containsObject(o,u)?(n=o.nickname,c.emit(f.SEND_PMESSAGE,{reciver:o.socketID,content:h}),s(n,h)):(t.deletedUser={nickname:o.nickname,condition:!0},t.messagearea.disabled=!0,setTimeout(function(e){t.deletedUser.condition=!1,t.messagearea.disabled=!1,m({})},3e3)):(n="global",c.emit(f.SEND_MESSAGE,h),s(n,h)),l(""),t.messagearea.focus(),C(".message-area").animate({scrollTop:C(".message-area")[0].scrollHeight},500),C("textarea").height("32px")):(l(""),t.messagearea.focus())},t.handleKeyPress=function(e){13===e.charCode&&(e.preventDefault(),t.handleClick(e))},t.deletedUser={nickname:"",condition:!1},t}return Object(m.a)(n,e),Object(o.a)(n,[{key:"componentDidMount",value:function(){_()(this.messagearea)}},{key:"render",value:function(){var e=this,n=this.props,t=n.messages,a=n.user,c=n.typing,s=n.chatWith,i=n.message,o=s.nickname?t[s.nickname]:t.global;return r.a.createElement("article",{className:"message-container"},r.a.createElement(R.TransitionGroup,{className:"message-area"},o?o.map(function(e,n){return r.a.createElement(R.CSSTransition,{timeout:500,key:n,classNames:"msg"},r.a.createElement("div",{key:n,className:"message ".concat(e.sender===a.nickname?"right":"")},r.a.createElement("h2",{className:"message-sender"},e.sender),r.a.createElement("p",{className:"message-content",dir:"auto"},e.content),r.a.createElement("span",{className:"message-time"},e.date)))}):null,!0===this.deletedUser.condition?r.a.createElement("div",{className:"deleted-user"},this.deletedUser.nickname," is no longer available"):null),r.a.createElement("section",{className:"person-typing"},s.nickname?c.split(" ")[0]===s.nickname?c:null:c),r.a.createElement("section",{className:"message-typing"},r.a.createElement("textarea",{placeholder:"Enter message...",onChange:this.handleChange,onKeyPress:this.handleKeyPress,ref:function(n){return e.messagearea=n},rows:"1",dir:"auto",value:i}),r.a.createElement("button",{className:"btn btn-primary",onClick:this.handleClick},r.a.createElement("i",{className:"material-icons"},"send"))))}}]),n}(a.Component),U=Object(p.b)(function(e){return{messages:e.messages,user:e.user,message:e.message,socket:e.socket,typing:e.typing,chatWith:e.chatWith,onlineUsers:e.onlineUsers}},function(e){return{sendMessage:function(n,t){e(d(n,t))},setMessage:function(n){e(function(e){return function(n){n({type:f.SET_MESSAGE,val:e})}}(n))},setChatWith:function(n){e(g(n))}}})(I),A=Object(p.b)(null,function(e){return{setChatWith:function(n){e(g(n))}}})(function(e){var n=e.onlineUsers,t=e.user,a=e.setChatWith;return r.a.createElement(R.TransitionGroup,{className:"friend-list"},n.map(function(e,n){return t.nickname!==e.nickname?r.a.createElement(R.CSSTransition,{key:n,timeout:1e3,classNames:"fade"},r.a.createElement("div",{key:n,className:"friend",onClick:function(n){return function(e){a(e),C(".main-menu").toggleClass("active")}(e)}},r.a.createElement("div",null,e.userLetter),r.a.createElement("div",null,e.nickname))):""}))}),M=t(113),G=t(15),w=function(e){function n(){var e,t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=Object(l.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(r)))).handleShowOnline=function(e){t.arrow="arrow_right"===t.arrow?"arrow_drop_down":"arrow_right",C(".online").children(".material-icons").text(t.arrow),C(".friend-list").slideToggle()},t.handleLogout=function(e){t.props.socket.disconnect(),window.location.href="/"},t.handleGlobalClick=function(e){t.props.setChatWith({}),C(".main-menu").toggleClass("active")},t}return Object(m.a)(n,e),Object(o.a)(n,[{key:"componentDidMount",value:function(){this.arrow="arrow_right",C(".friend-list").slideToggle()}},{key:"render",value:function(){var e=this.props,n=e.user,t=e.onlineUsers;return r.a.createElement("article",{className:"main-menu"},r.a.createElement("nav",{className:"sidemenu-nav"},r.a.createElement("button",{onClick:this.handleLogout,className:"logof"},r.a.createElement("i",{className:"material-icons"},"eject")),r.a.createElement("button",{onClick:function(e){C(".main-menu").toggleClass("active")},className:"menu-opener"},r.a.createElement("i",{className:"material-icons"},"menu"))),r.a.createElement("section",{className:"profile"},r.a.createElement("span",null,n.userLetter),r.a.createElement("h2",null,n.nickname)),r.a.createElement("section",{className:"chat-types"},r.a.createElement("button",{className:"type",onClick:this.handleGlobalClick},"global ",r.a.createElement("i",{className:"material-icons"},"arrow_right")),r.a.createElement("button",{className:"type online",onClick:this.handleShowOnline},"online ",r.a.createElement("i",{className:"material-icons"},"arrow_right")),r.a.createElement(A,{onlineUsers:t,user:n})))}}]),n}(a.Component),P=Object(G.c)(M.a,Object(p.b)(function(e){return{user:e.user,onlineUsers:e.onlineUsers,socket:e.socket}},function(e){return{setChatWith:function(n){e(g(n))}}}))(w),W=function(e){function n(e){var t;return Object(i.a)(this,n),void 0===(t=Object(l.a)(this,Object(u.a)(n).call(this,e))).props.user.nickname&&t.props.history.push("/"),t}return Object(m.a)(n,e),Object(o.a)(n,[{key:"componentWillUnmount",value:function(){clearInterval(this.inter)}},{key:"render",value:function(){var e=this.props.user.nickname?"Chatter | ".concat(this.props.user.nickname):"Chatter";return document.title=e,r.a.createElement(a.Fragment,null,r.a.createElement("article",{className:"main-container"},r.a.createElement(P,null),r.a.createElement("section",{className:"main-content"},r.a.createElement(O,null),r.a.createElement(U,null))))}}]),n}(a.Component),D=Object(p.b)(function(e){return{user:e.user,socket:e.socket}})(W),V=function(e){function n(){return Object(i.a)(this,n),Object(l.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,n=e.socketURL,t=e.setSocket,a=e.sendMessage,r=e.setTyping,c=e.setUsers,s=h()(n);t(s),s.on("connect",function(e){s.on(f.RECIVE_MESSAGE,function(e){a("global",e),C(".message-area").animate({scrollTop:C(".message-area")[0]?C(".message-area")[0].scrollHeight:0},500)}),s.on(f.RECIVE_PMESSAGE,function(e){a(e.dest,e.cont),C(".message-area").animate({scrollTop:C(".message-area")[0].scrollHeight},500)}),s.on(f.RECIVE_TYPING,function(e){r(e+" is typing"),setTimeout(function(e){r("")},2e3)}),s.on(f.RECIVE_ONLINE,function(e){console.log(e.length),c(e)})})}},{key:"render",value:function(){return r.a.createElement(S.a,{render:function(e){var n=e.location;return r.a.createElement(R.TransitionGroup,null,r.a.createElement(R.CSSTransition,{key:n.key,timeout:1e3,classNames:"fade"},r.a.createElement(k.a,{location:n},r.a.createElement(S.a,{path:"/",exact:!0,component:b}),r.a.createElement(S.a,{path:"/:nickname",component:D}))))}})}}]),n}(a.Component),K=Object(p.b)(function(e,n){return{socketURL:e.socketURL}},function(e){return{setSocket:function(n){e(function(e){return function(n){n({type:f.SET_SOCKET,val:e})}}(n))},sendMessage:function(n,t){e(d(n,t))},setTyping:function(n){e(function(e){return function(n){n({type:f.SET_TYPING,val:e})}}(n))},setUsers:function(n){e(function(e){return function(n,t){n({type:f.UPDATE_USERS,val:e})}}(n))}}})(V);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=t(112),Y=t(59),H=t(26),x=t(60),F=t(13),B={socketURL:"/",socket:null,nickname:"",message:"",typing:"",error:"",user:{},chatWith:{},messages:{global:[]},onlineUsers:[]},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case f.SET_SOCKET:return Object(F.a)({},e,{socket:n.val});case f.SET_NICKNAME:return Object(F.a)({},e,{nickname:n.val});case f.SET_TYPING:return Object(F.a)({},e,{typing:n.val});case f.CREATE_USER:return Object(F.a)({},e,{user:n.val,error:""});case f.SET_ERROR:return Object(F.a)({},e,{error:n.val});case f.SET_MESSAGE:return Object(F.a)({},e,{message:n.val});case f.SEND_MESSAGE:return Object(F.a)({},e,{messages:Object(F.a)({},e.messages,Object(H.a)({},n.val.dest,e.messages[n.val.dest]?[].concat(Object(x.a)(e.messages[n.val.dest]),[n.val.cont]):[n.val.cont]))});case f.UPDATE_USERS:return Object(F.a)({},e,{onlineUsers:n.val});case f.CHAT_WITH:return Object(F.a)({},e,{chatWith:n.val});default:return Object(F.a)({},e)}},q=Object(G.d)(J,Object(G.a)(Y.a));s.a.render(r.a.createElement(p.a,{store:q},r.a.createElement(L.a,null,r.a.createElement(R.CSSTransition,{in:!0,appear:!0,classNames:"slideIn",timeout:1e3},r.a.createElement(S.a,{path:"/",component:K})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},2:function(e,n){e.exports={SET_SOCKET:"SET_SOCKET",SET_NICKNAME:"SET_NICKNAME",VERIFIY_USER:"VERIFIY_USER",SET_ERROR:"SET_ERROR",CREATE_USER:"CREATE_USER",TYPING:"TYPING",RECIVE_TYPING:"RECIVE_TYPING",SET_TYPING:"SET_TYPING",SET_MESSAGE:"SET_MESSAGE",SEND_MESSAGE:"SEND_MESSAGE",RECIVE_MESSAGE:"RECIVE_MESSAGE",SEND_PMESSAGE:"SEND_PMESSAGE",RECIVE_PMESSAGE:"RECIVE_PMESSAGE",RECIVE_ONLINE:"RECIVE_ONLINE",UPDATE_USERS:"UPDATE_USERS",CHAT_WITH:"CHAT_WITH"}},61:function(e,n,t){e.exports=t(110)},91:function(e,n){},98:function(e,n,t){}},[[61,2,1]]]);
//# sourceMappingURL=main.f4b8893c.chunk.js.map