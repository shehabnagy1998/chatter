(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{2:function(e,n){e.exports={SET_SOCKET:"SET_SOCKET",SET_NICKNAME:"SET_NICKNAME",VERIFIY_USER:"VERIFIY_USER",SET_ERROR:"SET_ERROR",CREATE_USER:"CREATE_USER",SEND_MESSAGE:"SEND_MESSAGE",TYPING:"TYPING",RECIVE_TYPING:"RECIVE_TYPING",SET_TYPING:"SET_TYPING",SET_MESSAGE:"SET_MESSAGE",RECIVE_MESSAGE:"RECIVE_MESSAGE",LOG_OFF:"LOG_OFF",RECIVE_ONLINE:"RECIVE_ONLINE",UPDATE_USERS:"UPDATE_USERS"}},55:function(e,n,t){e.exports=t(97)},85:function(e,n){},92:function(e,n,t){},97:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(46),s=t.n(c),o=t(6),i=t(7),l=t(10),u=t(8),m=t(11),E=t(47),p=t.n(E),h=t(9),f=t(2),g=function(e){return function(n,t){n({type:f.SEND_MESSAGE,val:e})}},v=t(101),d=t(98),S=function(e){function n(){var e,t;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=Object(l.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(r)))).handleChange=function(e){t.props.setNickname(e.target.value)},t.handleClick=function(e){var n=t.props,a=n.nickname,r=n.setError,c=n.verifiyUser;t.userPattern.test(a)?c(t.props.history):r("nickname must be min 3 chars and max 10")},t.handleKeyPress=function(e){13===e.charCode&&(e.preventDefault(),t.handleClick(e))},t.userPattern=/^[A-Za-z0-9_]{3,10}$/,t}return Object(m.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){var e=this.props.error;return document.title="Chatter",r.a.createElement("article",{className:"login-container"},r.a.createElement("section",{className:"login-content"},r.a.createElement("h1",{className:"title"},"got a nickname ?"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",onChange:this.handleChange,onKeyPress:this.handleKeyPress,placeholder:"Enter nickname..."}),r.a.createElement("p",null,e)),r.a.createElement("button",{onClick:this.handleClick,className:"btn btn-primary"},"Log in")))}}]),n}(a.Component),b=Object(h.b)(function(e){return{nickname:e.nickname,error:e.error}},function(e){return{setNickname:function(n){var t;e((t=n,function(e){e({type:f.SET_NICKNAME,val:t})}))},verifiyUser:function(n){var t;e((t=n,function(e,n){var a=n(),r=a.nickname,c=a.socket;c.emit(f.VERIFIY_USER,r,function(n){n.isUser?e({type:f.SET_ERROR,val:"nickname not available"}):(c.emit(f.CREATE_USER,n.user),e({type:f.CREATE_USER,val:n.user}),t.push("/".concat(n.user.nickname)))})}))},setError:function(n){var t;e((t=n,function(e){e({type:f.SET_ERROR,val:t})}))}}})(S),k=(t(92),t(12)),O=function(e){function n(){return Object(o.a)(this,n),Object(l.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("nav",{className:"page-navbar"},r.a.createElement("button",{onClick:function(e){k(".main-menu").toggleClass("active")},className:"menu-opener"},r.a.createElement("i",{className:"material-icons"},"menu")),r.a.createElement("h1",{className:"page-title"},"chatter"))}}]),n}(a.Component),N=t(49),y=t.n(N),_=t(50),C=t.n(_),j=function(e){function n(){var e,t;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=Object(l.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(r)))).jMethods=function(e){var n=k(window).innerHeight()-k(".page-navbar").innerHeight();k(".message-container").height(n)},t.handleChange=function(e){t.props.setMessage(e.target.value),t.props.socket.emit(f.TYPING,t.props.user.nickname)},t.handleClick=function(e){var n={sender:t.props.user.nickname,date:C()((new Date).toString()).format("D/MMM - hh:mm a"),content:t.props.message};t.props.socket.emit(f.SEND_MESSAGE,n),t.props.sendMessage(n),t.message.value="",t.message.focus()},t.handleKeyPress=function(e){13===e.charCode&&(e.preventDefault(),t.handleClick(e))},t}return Object(m.a)(n,e),Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.inter=setInterval(function(n){e.jMethods()},1e3),y()(this.message)}},{key:"render",value:function(){var e=this,n=this.props,t=n.messages,a=n.user,c=n.typing;return r.a.createElement("article",{className:"message-container"},r.a.createElement("section",{className:"message-area"},t.map(function(e,n){return r.a.createElement("div",{key:n,className:"message ".concat(e.sender===a.nickname?"right":"")},r.a.createElement("h2",{className:"message-sender"},e.sender),r.a.createElement("p",{className:"message-content"},e.content),r.a.createElement("span",{className:"message-time"},e.date))})),r.a.createElement("section",{className:"person-typing"},c),r.a.createElement("section",{className:"message-typing"},r.a.createElement("textarea",{placeholder:"Enter message...",onChange:this.handleChange,onKeyPress:this.handleKeyPress,ref:function(n){return e.message=n},rows:"1",dir:"auto"}),r.a.createElement("button",{className:"btn btn-primary",onClick:this.handleClick},r.a.createElement("i",{className:"material-icons"},"send"))))}}]),n}(a.Component),T=Object(h.b)(function(e){return{messages:e.messages,user:e.user,message:e.message,socket:e.socket,typing:e.typing}},function(e){return{sendMessage:function(n){e(g(n))},setMessage:function(n){e(function(e){return function(n){n({type:f.SET_MESSAGE,val:e})}}(n))}}})(j),R=function(e){var n=e.onlineUsers,t=e.user;return r.a.createElement("section",{className:"friend-list"},n.map(function(e,n){return t.nickname!==e.nickname?r.a.createElement("div",{key:n,className:"friend"},r.a.createElement("span",null,e.userLetter),r.a.createElement("h3",null,e.nickname)):""}))},I=t(100),w=t(14),U=function(e){function n(){var e,t;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=Object(l.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(r)))).handleShowOnline=function(e){t.arrow="arrow_right"===t.arrow?"arrow_drop_down":"arrow_right",k(".online").children(".material-icons").text(t.arrow),k(".friend-list").slideToggle()},t.handleLogout=function(e){var n=t.props,a=n.socket,r=n.user;a.emit(f.LOG_OFF,r),t.props.history.push("/")},t}return Object(m.a)(n,e),Object(i.a)(n,[{key:"componentDidMount",value:function(){this.arrow="arrow_right",k(".friend-list").slideToggle()}},{key:"render",value:function(){var e=this.props,n=e.user,t=e.onlineUsers;return r.a.createElement("article",{className:"main-menu"},r.a.createElement("nav",{className:"sidemenu-nav"},r.a.createElement("button",{onClick:this.handleLogout,className:"logof"},r.a.createElement("i",{className:"material-icons"},"eject")),r.a.createElement("button",{onClick:function(e){k(".main-menu").toggleClass("active")},className:"menu-opener"},r.a.createElement("i",{className:"material-icons"},"menu"))),r.a.createElement("section",{className:"profile"},r.a.createElement("span",null,n.userLetter),r.a.createElement("h2",null,n.nickname)),r.a.createElement("section",{className:"chat-types"},r.a.createElement("button",{className:"type"},"global ",r.a.createElement("i",{className:"material-icons"},"arrow_right")),r.a.createElement("button",{className:"type online",onClick:this.handleShowOnline},"online ",r.a.createElement("i",{className:"material-icons"},"arrow_right")),r.a.createElement(R,{onlineUsers:t,user:n})))}}]),n}(a.Component),A=Object(w.c)(I.a,Object(h.b)(function(e){return{user:e.user,onlineUsers:e.onlineUsers,socket:e.socket}}))(U),M=function(e){function n(e){var t;return Object(o.a)(this,n),void 0===(t=Object(l.a)(this,Object(u.a)(n).call(this,e))).props.user.nickname&&t.props.history.push("/"),t}return Object(m.a)(n,e),Object(i.a)(n,[{key:"componentWillUnmount",value:function(){clearInterval(this.inter)}},{key:"render",value:function(){return document.title="Chatter | ".concat(this.props.user.nickname),r.a.createElement(a.Fragment,null,r.a.createElement("article",{className:"main-container"},r.a.createElement(A,null),r.a.createElement("section",{className:"main-content"},r.a.createElement(O,null),r.a.createElement(T,null))))}}]),n}(a.Component),G=Object(h.b)(function(e){return{user:e.user,socket:e.socket}})(M),P=function(e){function n(){return Object(o.a)(this,n),Object(l.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,n=e.socketURL,t=e.setSocket,a=e.sendMessage,r=e.setTyping,c=e.setUsers,s=p()(n);t(s),s.on("connect",function(e){console.log("connected successfully")}),s.on(f.RECIVE_MESSAGE,function(e){a(e)}),s.on(f.RECIVE_TYPING,function(e){r(e+" is typing"),setTimeout(function(e){r("")},3e3)}),s.on(f.RECIVE_ONLINE,function(e){console.log(e.length),c(e)})}},{key:"render",value:function(){return r.a.createElement("article",{className:"App"},r.a.createElement(v.a,null,r.a.createElement(d.a,{path:"/",exact:!0,component:b}),r.a.createElement(d.a,{path:"/:nickname",component:G})))}}]),n}(a.Component),D=Object(h.b)(function(e,n){return{socketURL:e.socketURL}},function(e){return{setSocket:function(n){e(function(e){return function(n){n({type:f.SET_SOCKET,val:e})}}(n))},sendMessage:function(n){e(g(n))},setTyping:function(n){e(function(e){return function(n){n({type:f.SET_TYPING,val:e})}}(n))},setUsers:function(n){e(function(e){return function(n,t){n({type:f.UPDATE_USERS,val:e})}}(n))}}})(P);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=t(99),K=t(53),Y=t(54),V=t(13),F={socketURL:"/",socket:null,nickname:"",message:"",typing:"",error:"",user:{},messages:[],onlineUsers:[]},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case f.SET_SOCKET:return Object(V.a)({},e,{socket:n.val});case f.SET_NICKNAME:return Object(V.a)({},e,{nickname:n.val});case f.SET_TYPING:return Object(V.a)({},e,{typing:n.val});case f.CREATE_USER:return Object(V.a)({},e,{user:n.val,error:""});case f.SET_ERROR:return Object(V.a)({},e,{error:n.val});case f.SET_MESSAGE:return Object(V.a)({},e,{message:n.val});case f.SEND_MESSAGE:return Object(V.a)({},e,{messages:[].concat(Object(Y.a)(e.messages),[n.val])});case f.UPDATE_USERS:return Object(V.a)({},e,{onlineUsers:n.val});default:return Object(V.a)({},e)}},W=Object(w.d)(x,Object(w.a)(K.a));s.a.render(r.a.createElement(h.a,{store:W},r.a.createElement(L.a,null,r.a.createElement(d.a,{path:"/",component:D}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[55,2,1]]]);
//# sourceMappingURL=main.ab84cca1.chunk.js.map