(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{2:function(e,n){e.exports={SET_SOCKET:"SET_SOCKET",SET_NICKNAME:"SET_NICKNAME",VERIFIY_USER:"VERIFIY_USER",SET_ERROR:"SET_ERROR",CREATE_USER:"CREATE_USER",TYPING:"TYPING",RECIVE_TYPING:"RECIVE_TYPING",SET_TYPING:"SET_TYPING",SET_MESSAGE:"SET_MESSAGE",SEND_MESSAGE:"SEND_MESSAGE",RECIVE_MESSAGE:"RECIVE_MESSAGE",SEND_PMESSAGE:"SEND_PMESSAGE",RECIVE_PMESSAGE:"RECIVE_PMESSAGE",RECIVE_ONLINE:"RECIVE_ONLINE",UPDATE_USERS:"UPDATE_USERS",CHAT_WITH:"CHAT_WITH"}},56:function(e,n,t){e.exports=t(98)},86:function(e,n){},93:function(e,n,t){},98:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),r=t(47),s=t.n(r),i=t(8),o=t(9),l=t(11),u=t(10),m=t(12),E=t(48),h=t.n(E),p=t(5),f=t(2),g=function(e){return function(n,t){n({type:f.CHAT_WITH,val:e})}},d=function(e,n){return function(t){t({type:f.SEND_MESSAGE,val:{dest:e,cont:n}})}},S=t(102),b=t(99),k=function(e){function n(){var e,t;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(t=Object(l.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(c)))).handleChange=function(e){t.props.setNickname(e.target.value)},t.handleClick=function(e){var n=t.props,a=n.verifiyUser,c=n.nickname,r=n.setError;c.length<=0?r("nickname is required"):c.length>=3?a(t.props.history):r("nickname must be min 3 chars")},t.handleKeyPress=function(e){13===e.charCode&&(e.preventDefault(),t.handleClick(e))},t}return Object(m.a)(n,e),Object(o.a)(n,[{key:"render",value:function(){var e=this.props.error;return document.title="Chatter",c.a.createElement("article",{className:"login-container"},c.a.createElement("section",{className:"login-content"},c.a.createElement("h1",{className:"title"},"got a nickname ?"),c.a.createElement("div",null,c.a.createElement("input",{type:"text",onChange:this.handleChange,onKeyPress:this.handleKeyPress,placeholder:"Enter nickname...",maxLength:"10"}),c.a.createElement("p",null,e)),c.a.createElement("button",{onClick:this.handleClick,className:"btn btn-primary"},"Log in")))}}]),n}(a.Component),v=Object(p.b)(function(e){return{nickname:e.nickname,error:e.error}},function(e){return{setNickname:function(n){var t;e((t=n,function(e){e({type:f.SET_NICKNAME,val:t})}))},verifiyUser:function(n){var t;e((t=n,function(e,n){var a=n(),c=a.nickname,r=a.socket;r.emit(f.VERIFIY_USER,c,function(n){n.isUser?e({type:f.SET_ERROR,val:"nickname not available"}):(r.emit(f.CREATE_USER,n.user),e({type:f.CREATE_USER,val:n.user}),t.push("/".concat(n.user.nickname)))})}))},setError:function(n){var t;e((t=n,function(e){e({type:f.SET_ERROR,val:t})}))}}})(k),C=(t(93),t(3)),N=function(e){function n(){return Object(i.a)(this,n),Object(l.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(o.a)(n,[{key:"render",value:function(){var e=this.props.chatWith;return c.a.createElement("nav",{className:"page-navbar"},c.a.createElement("button",{onClick:function(e){C(".main-menu").toggleClass("active")},className:"menu-opener"},c.a.createElement("i",{className:"material-icons"},"menu")),c.a.createElement("h1",{className:"page-title"},e.nickname?e.nickname:"Chatter"))}}]),n}(a.Component),O=Object(p.b)(function(e){return{chatWith:e.chatWith}})(N),_=t(50),T=t.n(_),y=t(51),j=t.n(y),R=function(e){function n(){var e,t;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(t=Object(l.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(c)))).handleChange=function(e){t.props.setMessage(e.target.value),t.props.socket.emit(f.TYPING,t.props.user.nickname)},t.containsObject=function(e,n){for(var t=0;t<n.length;t++)if(n[t]===e)return!0;return!1},t.handleClick=function(e){var n,a=t.props,c=a.user,r=a.socket,s=a.sendMessage,i=a.message,o=a.chatWith,l=a.setMessage,u=a.onlineUsers,m=a.setChatWith,E={sender:c.nickname,date:j()().format("D/MMM - hh:mm a"),content:i};i.length&&(o.socketID?t.containsObject(o,u)?(n=o.nickname,r.emit(f.SEND_PMESSAGE,{reciver:o.socketID,content:E}),s(n,E)):(t.deletedUser={nickname:o.nickname,condition:!0},t.messagearea.disabled=!0,setTimeout(function(e){t.deletedUser.condition=!1,t.messagearea.disabled=!1,m({})},3e3)):(n="global",r.emit(f.SEND_MESSAGE,E),s(n,E)),l(""),t.messagearea.focus(),C(".message-area").animate({scrollTop:C(".message-area")[0].scrollHeight},500),C("textarea").height("32px"))},t.handleKeyPress=function(e){13===e.charCode&&(e.preventDefault(),t.handleClick(e))},t.deletedUser={nickname:"",condition:!1},t}return Object(m.a)(n,e),Object(o.a)(n,[{key:"componentDidMount",value:function(){T()(this.messagearea)}},{key:"render",value:function(){var e=this,n=this.props,t=n.messages,a=n.user,r=n.typing,s=n.chatWith,i=n.message,o=s.nickname?t[s.nickname]:t.global;return c.a.createElement("article",{className:"message-container"},c.a.createElement("section",{className:"message-area"},o?o.map(function(e,n){return c.a.createElement("div",{key:n,className:"message ".concat(e.sender===a.nickname?"right":"")},c.a.createElement("h2",{className:"message-sender"},e.sender),c.a.createElement("p",{className:"message-content",dir:"auto"},e.content),c.a.createElement("span",{className:"message-time"},e.date))}):null,!0===this.deletedUser.condition?c.a.createElement("div",{className:"deleted-user"},this.deletedUser.nickname," is no longer available"):null),c.a.createElement("section",{className:"person-typing"},s.nickname?r.split(" ")[0]===s.nickname?r:null:r),c.a.createElement("section",{className:"message-typing"},c.a.createElement("textarea",{placeholder:"Enter message...",onChange:this.handleChange,onKeyPress:this.handleKeyPress,ref:function(n){return e.messagearea=n},rows:"1",dir:"auto",value:i}),c.a.createElement("button",{className:"btn btn-primary",onClick:this.handleClick},c.a.createElement("i",{className:"material-icons"},"send"))))}}]),n}(a.Component),I=Object(p.b)(function(e){return{messages:e.messages,user:e.user,message:e.message,socket:e.socket,typing:e.typing,chatWith:e.chatWith,onlineUsers:e.onlineUsers}},function(e){return{sendMessage:function(n,t){e(d(n,t))},setMessage:function(n){e(function(e){return function(n){n({type:f.SET_MESSAGE,val:e})}}(n))},setChatWith:function(n){e(g(n))}}})(R),U=Object(p.b)(null,function(e){return{setChatWith:function(n){e(g(n))}}})(function(e){var n=e.onlineUsers,t=e.user,a=e.setChatWith;return c.a.createElement("section",{className:"friend-list"},n.map(function(e,n){return t.nickname!==e.nickname?c.a.createElement("div",{key:n,className:"friend",onClick:function(n){return function(e){a(e),C(".main-menu").toggleClass("active")}(e)}},c.a.createElement("span",null,e.userLetter),c.a.createElement("h3",null,e.nickname)):""}))}),A=t(101),M=t(14),w=function(e){function n(){var e,t;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(t=Object(l.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(c)))).handleShowOnline=function(e){t.arrow="arrow_right"===t.arrow?"arrow_drop_down":"arrow_right",C(".online").children(".material-icons").text(t.arrow),C(".friend-list").slideToggle()},t.handleLogout=function(e){t.props.socket.disconnect(),window.location.href="/"},t.handleGlobalClick=function(e){t.props.setChatWith({}),C(".main-menu").toggleClass("active")},t}return Object(m.a)(n,e),Object(o.a)(n,[{key:"componentDidMount",value:function(){this.arrow="arrow_right",C(".friend-list").slideToggle()}},{key:"render",value:function(){var e=this.props,n=e.user,t=e.onlineUsers;return c.a.createElement("article",{className:"main-menu"},c.a.createElement("nav",{className:"sidemenu-nav"},c.a.createElement("button",{onClick:this.handleLogout,className:"logof"},c.a.createElement("i",{className:"material-icons"},"eject")),c.a.createElement("button",{onClick:function(e){C(".main-menu").toggleClass("active")},className:"menu-opener"},c.a.createElement("i",{className:"material-icons"},"menu"))),c.a.createElement("section",{className:"profile"},c.a.createElement("span",null,n.userLetter),c.a.createElement("h2",null,n.nickname)),c.a.createElement("section",{className:"chat-types"},c.a.createElement("button",{className:"type",onClick:this.handleGlobalClick},"global ",c.a.createElement("i",{className:"material-icons"},"arrow_right")),c.a.createElement("button",{className:"type online",onClick:this.handleShowOnline},"online ",c.a.createElement("i",{className:"material-icons"},"arrow_right")),c.a.createElement(U,{onlineUsers:t,user:n})))}}]),n}(a.Component),G=Object(M.c)(A.a,Object(p.b)(function(e){return{user:e.user,onlineUsers:e.onlineUsers,socket:e.socket}},function(e){return{setChatWith:function(n){e(g(n))}}}))(w),P=function(e){function n(e){var t;return Object(i.a)(this,n),void 0===(t=Object(l.a)(this,Object(u.a)(n).call(this,e))).props.user.nickname&&t.props.history.push("/"),t}return Object(m.a)(n,e),Object(o.a)(n,[{key:"componentWillUnmount",value:function(){clearInterval(this.inter)}},{key:"render",value:function(){return document.title="Chatter | ".concat(this.props.user.nickname),c.a.createElement(a.Fragment,null,c.a.createElement("article",{className:"main-container"},c.a.createElement(G,null),c.a.createElement("section",{className:"main-content"},c.a.createElement(O,null),c.a.createElement(I,null))))}}]),n}(a.Component),W=Object(p.b)(function(e){return{user:e.user,socket:e.socket}})(P),D=function(e){function n(){return Object(i.a)(this,n),Object(l.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,n=e.socketURL,t=e.setSocket,a=e.sendMessage,c=e.setTyping,r=e.setUsers,s=h()(n);t(s),s.on("connect",function(e){s.on(f.RECIVE_MESSAGE,function(e){a("global",e),C(".message-area").animate({scrollTop:C(".message-area")[0].scrollHeight},500)}),s.on(f.RECIVE_PMESSAGE,function(e){a(e.dest,e.cont),C(".message-area").animate({scrollTop:C(".message-area")[0].scrollHeight},500)}),s.on(f.RECIVE_TYPING,function(e){c(e+" is typing"),setTimeout(function(e){c("")},2e3)}),s.on(f.RECIVE_ONLINE,function(e){console.log(e.length),r(e)})})}},{key:"render",value:function(){return c.a.createElement("article",{className:"App"},c.a.createElement(S.a,null,c.a.createElement(b.a,{path:"/",exact:!0,component:v}),c.a.createElement(b.a,{path:"/:nickname",component:W})))}}]),n}(a.Component),V=Object(p.b)(function(e,n){return{socketURL:e.socketURL}},function(e){return{setSocket:function(n){e(function(e){return function(n){n({type:f.SET_SOCKET,val:e})}}(n))},sendMessage:function(n,t){e(d(n,t))},setTyping:function(n){e(function(e){return function(n){n({type:f.SET_TYPING,val:e})}}(n))},setUsers:function(n){e(function(e){return function(n,t){n({type:f.UPDATE_USERS,val:e})}}(n))}}})(D);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=t(100),L=t(54),Y=t(24),H=t(55),x=t(13),F={socketURL:"/",socket:null,nickname:"",message:"",typing:"",error:"",user:{},chatWith:{},messages:{global:[]},onlineUsers:[]},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case f.SET_SOCKET:return Object(x.a)({},e,{socket:n.val});case f.SET_NICKNAME:return Object(x.a)({},e,{nickname:n.val});case f.SET_TYPING:return Object(x.a)({},e,{typing:n.val});case f.CREATE_USER:return Object(x.a)({},e,{user:n.val,error:""});case f.SET_ERROR:return Object(x.a)({},e,{error:n.val});case f.SET_MESSAGE:return Object(x.a)({},e,{message:n.val});case f.SEND_MESSAGE:return Object(x.a)({},e,{messages:Object(x.a)({},e.messages,Object(Y.a)({},n.val.dest,e.messages[n.val.dest]?[].concat(Object(H.a)(e.messages[n.val.dest]),[n.val.cont]):[n.val.cont]))});case f.UPDATE_USERS:return Object(x.a)({},e,{onlineUsers:n.val});case f.CHAT_WITH:return Object(x.a)({},e,{chatWith:n.val});default:return Object(x.a)({},e)}},J=Object(M.d)(B,Object(M.a)(L.a));s.a.render(c.a.createElement(p.a,{store:J},c.a.createElement(K.a,null,c.a.createElement(b.a,{path:"/",component:V}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[56,2,1]]]);
//# sourceMappingURL=main.08c68f5d.chunk.js.map